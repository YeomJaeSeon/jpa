# 객체지향 언어와, 관계형 DB

- 관계형 DB를 통해서 데이터를 정형화되게 관리할수있다.
- 그리고 객체지향 언어의 장점으로 재사용있는 어플리케이션을 만들수있다.
- 객체와 관계형 DB를 이용한 어플리케이션을 만드는것이 요즘시대의 대세이다.
- 객체를 관계형 DB에 저장하여 관리.!
- 그러나 관게형 DB에 데이터를 관리하기 위해서는 SQL로만 가능하다.

# SQL중심의 개발

- 간단하게 객체하나를 관계형 DB에 추가하는데도 INSERT, UPDATE, SELECT, DELETE, 자바객체를 SQL로, SQL을 객체로 만드는 단순하지만 반복적인 작업이 너무 많이 일어난다.

- 즉, 객체를 관계형 DB에서 관리하기위해서는 **SQL에 의존적인 개발을 피하기가 어렵다**

# 객체와 관계형 DB의 패러다임 불일치

- 객체지향언어의 객체는 추상화, 캡슐화, 상속, 다형성등의 장점으로 어플리케이션의 복잡성을 낮추는데 도움을준다.

- 반면 관계형 DB는 데이터를 정형화된 표에 잘 관리하기 위해서 존재한다.
- 이렇게 두 기술의 패러다임, 태어난 계기와 용도가 다르기에 당연히 두기술을 함께 사용하는데 번거러운 작업들이 동반된다.
- 관계형 DB는 SQL만을 이해하므로 객체를 SQL로, SQL을 다시 객체로 매핑하는 작업을 해야한다.

# 객체와 관계형 데이터베이스의 차이

1. 상속

- 객체지향언어의 상속은 클래스를 재사용하여 간단하게 새로운 클래스를 작성할수있다.
- 관계형 데이터베이스에서 비슷한 개념으로는 슈퍼타입과 서브타입 관계가 있다.
- 자식타입의 객체를 하나 추가하려면 슈퍼타입, 서브타입의 테이블에 데이터를 두번 INSERT해야한다.
- 조회는 더 복잡하다. JOIN으로 두 테이블을을 결합한뒤 각각의 객체를 생성하고...

-> 자바 컬렉션에 그냥 데이터를 저장하면 간단하게 `get`으로 조회할수있다. 물론 다형성으로 부모타입으로도 조회가 가능하다.

2. 연관관계

- 객체지향언어에서 연관관계(포함관계)를 사용하는방법으로는 포함할 객체의 참조변수를 가지고있고 해당 참조변수가 실제 인스턴스를 가리게 하면된다.

- 그러나 관계형 DB에서는 외래키를 통해서 테이블 사이의 연관관계를 지정할수있다.

- 객체지향언어에서 관계형 DB를 사용할때, 연관관계를 이용하려면 외래키를 갖는 primitive type의 멤버변수를 사용하면되는데 객체지향적으로 설계하기위해서 참조변수로 바꾸면 관계형 DB에 접근하려할때 너무 복잡한 작업들이 동행된다.

> 객체지향적으로 설계하면 관게형 DB를 사용하는데 더 복잡해진다.

3. 객체 그래프 탐색

- 객체지향언어에서는 객체간의 관계가 있으면 `.`을 통해서 접근한다.
- 관계형 DB를 사용하면 처음 SELECT되는 SQL에따라서 탐색범위가 결정된다.
- 예를들어 카드 덱 클래스가 카드 클래스를 포함하면 카드 덱클래스의 인스턴스에서 `.`을통해서 카드 클래스 인스턴스에 접근할수있다. 그런데 관계형 DB에서는 SELECT를 카드덱만하면 카드 데이터에는 접근할수가 없다.
- 이에 따라서 다른사람이 만든 DAO를 통해서 데이터에 접근한 객체를 신뢰할수없는 단점이있다.(DAO가 리턴한 객체의 탐색범위는 직접 보는게 아니면 확인할수가없음. 위 예시처럼 카드 덱의 테이블만 조회했을수도있음)

> 즉, 객체지향적으로 설계하면 할수록 관계형 DB에 접근하기 위한 복잡한 작업만 늘 뿐이다. 자바컬렉션에 객체를 저장하듯이 관계형 DB에 데이터를 저장할수는 없을까?
