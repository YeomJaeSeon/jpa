# 일대일 관계

- 일대일 연관관계는 두테이블간 하나의 레코드씩 관계가 있다는 의미
- ex) 학교 내의 자기 자리는 하나뿐이다. 그럼 자리와 학생은 일대일 관계이다.
- 자주 접근하는 테이블에 외래키를 주거나 그렇지못한 테이블에 외래키를 줘도 상관없다.(다대일관계의 테이블은 무조건 외래키가 다쪽에 존재함과 다르다)
- 일대일 이므로 유니크 제약조건을 추가하여 유일함을 제약해야한다.

# 일대일 단방향

- 다대일과 너무비슷하다.
- 외래키가 있는 엔티티의 참조변수를 연관관계 주인으로설정한다.
- `@OneToOne`과, `@JoinColumn`으로 외래키를 매핑한다.

```java
    @OneToOne
    @JoinColumn(name = "LOCKER_ID")
    private Locker locker;
```

# 일대일 양방향

- 연관관계 주인아닌(외래키 없는 엔티티)에서 조회할 필요가 있으면 양방향 연관관계를 추가한다.
- 다대일과같이 mappedBy를 이용해서 주인을 설정한다.(주인 참조변수를 설정)

```java
    @OneToOne(mappedBy = "locker")
    private Member member;
```

- 연관관계 주인은 locker참조변수이당. 이 locker참조변수가 외래키와 매핑되어있다.
- member로는 조회밖에할수없다. 외래키 관리가 불가능(등록이나 수정이 불가)
- 다대일과같다.

- 다대일과 일대다의 차이는 뭐였찌? 바로 연관관계의 주인이 다에있느냐 일에있느냐의 차이였따. 외래키는 항상 다에있으니(다대일 관계에서) 일대다는 외래키가있는 다른 테이블과 매핑한것이다.
- 일대일은 이것이불가능, 즉 외래키가 없는 엔티티의 참조변수로 외래키가 있는 테이블 외래키로 매핑이안됨
- 일대일이므로 그냥 이땐 외래키가 있는 엔티티의 참조변수를 주인으로 바꾸어서 매핑하면됨.

> 그냥 외래키가 있는 테이블의 외래키와 엔티티의 참조변수를 매핑하라.!(일대다도 다대일로 하는것이 더좋음 )

# 결론

- 일대일 관계는 외래키가 있는 테이블의 외래키와, 엔티티의 참조변수를 매핑해라.(반대편 사이드의 엔티티의 참조변수로는 매핑못한다, 무조건 외래키있는 곳과 맞춰라)
- 다대일과 사용방법은 비슷하다.
- 자주 접근하는 테이블에 외래키를줄지, 자주 접근하지않는 테이블에 외래키를 줄지에 따라서 어떤 엔티티의 참조변수와 외래키를 매핑할지가 정해진다.(외래키가 어디있는지만 정해지면 해당 외래키와 매핑할 참조변수도 정해진다.)
